{% extends "base.html" %}

{% block content %}
<!-- Hero/Welcome Section - TMDB Style -->
<section class="welcome-section">
    <div class="welcome-content">
        <div class="container">
            <h1>Welcome to OWDB.</h1>
            <h2>Millions of wrestlers, events, matches, and promotions to discover. It's a slobberknocker!</h2>
            <div class="search-wrapper">
                <form action="{% url 'wrestlers' %}" method="get" class="hero-search-form">
                    <input type="text" name="q" class="hero-search-input" placeholder="Search for a wrestler, event, promotion...">
                    <button type="submit" class="hero-search-btn">Search</button>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- Trending Section - TMDB Style -->
<section class="content-section">
    <div class="container">
        <div class="section-header">
            <h3>Trending</h3>
            <div class="section-tabs">
                <button class="tab-btn active" data-tab="today">Today</button>
                <button class="tab-btn" data-tab="week">This Week</button>
            </div>
        </div>
        <div class="scroller-wrap">
            <div class="scroller">
                {% for wrestler in recent_wrestlers %}
                <div class="card-item">
                    <a href="{% url 'wrestler_detail' wrestler.pk %}">
                        <div class="card-poster">
                            {% if wrestler.image_url %}
                            <img src="{{ wrestler.image_url }}" alt="{{ wrestler.name }}">
                            {% else %}
                            <div class="poster-placeholder">
                                <span>{{ wrestler.name|slice:":1" }}</span>
                            </div>
                            {% endif %}
                        </div>
                        <div class="card-content">
                            <h4>{{ wrestler.name }}</h4>
                            <p>{% if wrestler.debut_year %}Debut: {{ wrestler.debut_year }}{% endif %}</p>
                        </div>
                    </a>
                </div>
                {% empty %}
                <div class="empty-scroller">
                    <p>No trending wrestlers yet. Be the first to add one!</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- Latest Events Section -->
<section class="content-section">
    <div class="container">
        <div class="section-header">
            <h3>Latest Events</h3>
            <div class="section-tabs">
                <button class="tab-btn active">All</button>
                <button class="tab-btn">WWE</button>
                <button class="tab-btn">AEW</button>
            </div>
        </div>
        <div class="scroller-wrap">
            <div class="scroller">
                {% for event in recent_events %}
                <div class="card-item">
                    <a href="{% url 'event_detail' event.pk %}">
                        <div class="card-poster event-poster">
                            <div class="poster-placeholder event-placeholder">
                                <span>{{ event.name|slice:":2" }}</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <h4>{{ event.name }}</h4>
                            <p>{{ event.promotion.name }}</p>
                        </div>
                    </a>
                </div>
                {% empty %}
                <div class="empty-scroller">
                    <p>No events yet.</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- Join Section - TMDB Style -->
<section class="join-section">
    <div class="container">
        <div class="join-content">
            <h2>Join Today</h2>
            <p>Get access to maintain your own custom wrestling lists, track your favorite wrestlers, and contribute to the world's most comprehensive wrestling database. Sign up and join our community.</p>
            <a href="{% url 'signup' %}" class="btn btn-gold btn-lg">Sign Up</a>
        </div>
    </div>
</section>

<!-- Stats/Leaderboard Section -->
<section class="content-section stats-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="section-header">
                    <h3>Database Stats</h3>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-value">{{ stats.wrestlers|default:0 }}</span>
                        <span class="stat-name">Wrestlers</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{ stats.promotions|default:0 }}</span>
                        <span class="stat-name">Promotions</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{ stats.events|default:0 }}</span>
                        <span class="stat-name">Events</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{ stats.matches|default:0 }}</span>
                        <span class="stat-name">Matches</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{ stats.titles|default:0 }}</span>
                        <span class="stat-name">Championships</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{ stats.venues|default:0 }}</span>
                        <span class="stat-name">Venues</span>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="section-header">
                    <h3>API Access</h3>
                </div>
                <div class="api-promo">
                    <p>Access our comprehensive wrestling data through our REST API. Build apps, create integrations, or analyze wrestling history.</p>
                    <ul class="api-features">
                        <li>Free tier: 100 requests/hour</li>
                        <li>Full wrestler, event, and match data</li>
                        <li>Real-time updates</li>
                        <li>JSON responses</li>
                    </ul>
                    {% if user.is_authenticated %}
                    <a href="{% url 'account' %}" class="btn btn-primary">Manage API Keys</a>
                    {% else %}
                    <a href="{% url 'signup' %}" class="btn btn-primary">Get API Access</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
